\documentclass["../Cours.tex"]{subfiles}

\begin{document}
\chapitre{Fractions et proportionnalité}

\partie{Calculs fractionnaires}

\definition{Soient deux nombres $a$ et $b$, avec $b \neq 0$. Le quotient de $a$ par $b$ est le nombre qui, lorsqu'il est multiplié par $b$, donne $a$. $$\dfrac{a}{b} \times b = a$$}

\notation{On le note $\dfrac{a}{b}$. (écriture fractionnaire)}

\begin{listedexemples}
    \item $\dfrac{3}{4} \times 4 = \dfrac{3}{\cancel{4}} \times \cancel{4} = 3$
    \item $\dfrac{7,2}{5,8} \times 5,8 = \dfrac{7,2}{\cancel{5,8}} \times \cancel{5,8} = 7,2$
\end{listedexemples}


\propriete{Soit deux nombres $a$ et $b$ avec $b \neq 0$. Soit $k$ avec $k \neq 0$. 
$$\dfrac{a}{b} = \dfrac{ka}{kb}$$
}

\begin{listedexemples}
    \item $\dfrac{16}{20} = \dfrac{16 \times 4}{20 \times 4} = \dfrac{64}{80}$
    \item $\dfrac{35}{75} = \dfrac{35 \div 5}{75 \div 5} = \dfrac{7}{15}$
\end{listedexemples}

\definition{Simplifier une fraction, c'est trouver une autre fraction qui lui est égale avec un numérateur et un dénominateur plus petits.}

\propriete{Pour additionner deux fractions, il faut qu'elles aient le même dénominateur.}

\propriete{Soient deux nombres $a$ et $b$, $b \neq 0$ et deux nombres $c$ et $d$, $d \neq 0$. $$ \dfrac{a}{b} + \dfrac{c}{d} = \dfrac{ad+cb}{bd}$$}

\begin{listedexemples}
    \item $\dfrac{3}{7} + \dfrac{12}{8} = \dfrac{3 \times 8}{7 \times 8} + \dfrac{12 \times 7}{8 \times 7}$ 
\end{listedexemples}

\propriete{Soient $a$ et $b$ deux nombres, $b \neq 0$.\\ Soient $c$ et $d$ deux nombres, $d \neq 0$. $$\dfrac{a}{b} \times \dfrac{c}{d} = \dfrac{a \times c}{b \times d}$$}

\exemple{$$\dfrac{7}{5} \times \dfrac{3}{4} = \dfrac{7 \times 3}{5 \times 4} = \dfrac{21}{20}$$}

\propriete{Diviser par un nombre revient à multiplier par son inverse.}

\exemple{
\begin{center}
\begin{tikzpicture}
    \node at (0,0) {$\dfrac{2}{3} \div \dfrac{4}{5} = \dfrac{2}{3} \times \dfrac{5}{4} = \dfrac{10}{12}$};
    \draw[rouge] (0.1,-0.6) rectangle (1.1,0.6);
    \draw[rouge] (-1.85,-0.6) rectangle (-0.85,0.6);
    \draw[rouge,thick,-latex] (-1.35,-0.65) arc (-180:0:1 and 0.5);
    \node at (0,-1.5) {la fraction est inversée};
    \node at (0,-2) {et le $\div$ devient $\times$};
\end{tikzpicture}
\end{center}
}

\clearpage
\partie{Pourcentages}

\souspartie{Le pourcentage d'un nombre}

\definition{Calculer $p~\%$ d'un nombre $n$, c'est multiplier $\dfrac{p}{100}$ par $n$.}

\renewcommand\CancelColor{\color{rouge}}

\begin{listedexemples}
    \item $25~\%$ de $12 = \dfrac{25}{100} \times 12 = \dfrac{\cancel{25} \times 1}{\cancel{25} \times \cancel{4}} \times 3 \times \cancel{4} = 3$
    \item $25~\%$ de $100 = \dfrac{25}{\cancel{100}} \times \cancel{100} = 25$
    \item $75~\%$ de $32 = \dfrac{75}{100} \times 32 = \dfrac{3 \times \cancel{25}}{\cancel{4} \times \cancel{25}} \times 8 \times \cancel{4} = 3 \times 8 = 24$
\end{listedexemples}

\regle{Pour calculer une proportion sous forme de pourcentage, il faut que le dénominateur soit égal à 100.}

\exemple{%
    \begin{center}
    \begin{tikzpicture}
        \definecolor{bleuRF}{RGB}{05, 20, 64}
        \definecolor{blancRF}{RGB}{255, 255, 255}
        \definecolor{rougeRF}{RGB}{236, 25, 32}
        \draw[white, fill=bleuRF] (0,0) rectangle (1,2);
        \draw[white, fill=blancRF] (1,0) rectangle (2,2);
        \draw[white, fill=rougeRF] (2,0) rectangle (3,2);
    \end{tikzpicture}
    \end{center}
Dans le drapeau français, il y a 1 morceau sur 3 qui est bleu. Donc, la proportion de bleu dans le drapeau est de $\dfrac{1}{3}$. Pour la mettre sous forme de pourcentage, je peux multiplier au numérateur et au dénominateur par 100 :
$$\dfrac{1}{3} = \dfrac{1 \times 100}{3 \times 100} = \dfrac{1 \times 100}{3}~\% \approx 33,3 ~\% = \dfrac{33{,}3}{100}$$
}

\clearpage
\souspartie{Augmentation et diminution par un pourcentage}

\regle{\begin{itemize}\vspace{-1em}
    \item Augmenter une quantité de $x~\%$, c'est multiplier cette quantité par $\dfrac{100+x}{100}$.
    \item Diminuer une quantité de $x~\%$, c'est multiplier cette quantité par $\dfrac{100-x}{100}$.
\end{itemize}}

\begin{listedexemples}
    \item \fbox{$\qty{20}{\EURO} + 10~\%$ :} \hspace{2cm} $\qty{20}{\EURO} \times \dfrac{100 + 10}{100} = \qty{20}{\EURO} \times \dfrac{110}{100} = \qty{22}{\EURO}$ 
    \item \fbox{$\qty{150}{\EURO} - 30~\%$ :} \hspace{2cm} $\qty{150}{\EURO} \times \dfrac{100 - 30}{100} = \qty{150}{\EURO} \times \dfrac{70}{100} = \qty{105}{\EURO} $
\end{listedexemples}

\regle{Le pourcentage d'augmentation ou de diminution entre une valeur de départ et une valeur d'arrivée est :}

$$ \mbox{valeur d'arrivée} - \mbox{valeur de départ} $$

\partie{Échelle}

\definition{Dans un plan, l'échelle est le coefficient de proportionnalité tel que : $$\mbox{échelle} = \dfrac{\mbox{distance sur le plan}}{\mbox{distance réelle}}$$}

\remarque{Il faut la même unité pour les deux distances dans le calcul de l'échelle.}

\exemple{Sur un plan, \qty{1}{cm} sur le plan correspond à \qty{50}{km} dans la réalité. $$\mbox{échelle} = \dfrac{\qty{1}{cm}}{\qty{50}{km}}$$}

\propriete{Si les longueurs d'une figure sont multipliées par un facteur $k$, les aires sont multipliées par un facteur $k^2$ et les volumes par un facteur $k^3 = k \times k \times k$.}

\exemple{Si les longueurs sont multipliées par 5, alors les aires sont multipliées par $5^2 = 5 \times 5 = 25$, et les volumes sont multipliés par $5^3 = 5 \times 5 \times 5 = 125$.}


\newcommand{\trandom}{\directlua{
    local a = math.random(1,20)
    local b = math.random(1,20)
    local c = a * math.random(1,9)
    tex.print("\\dfrac{" .. a .. "}{" .. b .. "} = \\dfrac{" .. c .. "}{" .. "...}")
}}

\begin{luacode}
    function decalage_vertical()
        return "\\vphantom{\\normalsize{$\\dfrac{2^{2^{2}}}{2^{2^2}}$}}"
    end
    
    function dfrac(x, y)
        if x==math.floor(x) then x = math.floor(x) end
        if y==math.floor(y) then y = math.floor(y) end
        return "\\dfrac{" .. x .. "}{" .. y .. "}"
    end
    
    function addition_fraction(a, b, c, d)
        tex.print(decalage_vertical())
        tex.print("$" .. dfrac(a, b) .. "+" .. dfrac(c, d) .. "=$")
    end

    function addition_fraction_corrige(a, b, c, d)
        addition_fraction(a, b, c, d)
        local reponse = "$"
        if b == d then
            reponse = reponse .. dfrac(a+c,b)
        else
            if b > d and math.fmod(b, d) == 0 then 
                local k = b / d
                reponse = reponse .. dfrac(a, b) .. "+" .. dfrac(k*c, b) .. "=" .. dfrac(a+k*c, b)
            end
            if d > b and math.fmod(d, b) == 0 then 
                local k = d / b
                reponse = reponse .. dfrac(k*a, d) .. "+" .. dfrac(c, d) .. "=" .. dfrac(k*a+c, d)
            end
            if math.fmod(b,d) ~= 0 and math.fmod(d,b) ~= 0 then
                reponse = reponse .. dfrac(a*d,b*d) .. "+" .. dfrac(c*b,d*b) .. "=" ..  dfrac(a*d+c*b, b*d)
            end
        end
        reponse = reponse .. "$"
        tex.print(reponse)
    end

    function fraction_egale(a, b, c)
        tex.print(decalage_vertical())
        tex.print("$" .. dfrac(a,b) .. "=\\dfrac{" .. c .. "}{?}$")
    end

    function fraction_egale_corrige(a, b, c)
        tex.print(decalage_vertical())
        tex.print("$" .. dfrac(a,b) .. "=\\dfrac{" .. c .. "}{\\textcolor{rouge}{" .. math.floor(b*c/a) .. "}}$")
    end

    function multiplication_fractions(a, b, c, d)
        tex.print(decalage_vertical())
        tex.print("$" .. dfrac(a,b) .. "\\times" .. dfrac(c,d) .. "=$")
    end

    function multiplication_fractions_corrige(a, b, c, d)
        tex.print(decalage_vertical())
        tex.print("$" .. dfrac(a,b) .. "\\times" .. dfrac(c,d) .. "=\\dfrac{" .. a .. "\\times" .. c .. "}{" .. b .. "\\times" .. d .. "} = " .. dfrac(a*c, b*d) .. "$")
    end

    function division_fractions(a, b, c, d)
        tex.print(decalage_vertical())
        tex.print("$" .. dfrac(a,b) .. "\\div" .. dfrac(c,d) .. "=$")
    end

    function division_fractions_corrige(a, b, c, d)
        tex.print(decalage_vertical())
        tex.print("$" .. dfrac(a,b) .. "\\div" .. dfrac(c,d) .. "=$")
        multiplication_fractions_corrige(a,b,d,c)
    end
\end{luacode}

\clearpage
\EXERCICES

\begin{questions}

    \exercicetitre{Additionner des fractions}\vspace{-1.5em}
        \begin{multicols}{3}\small
        \begin{luacode}
            question() addition_fraction(20,4,2,4)
            question() addition_fraction(19,12,10,8)
            question() addition_fraction(17,3,5,5)
            question() addition_fraction(20,5,6,14)
            question() addition_fraction(9,16,6,16)
            question() addition_fraction(20,18,17,14)
            question() addition_fraction(15,7,7,8)
            question() addition_fraction(5,4,3,5)
            question() addition_fraction(7,4,9,6)
            question() addition_fraction(16,19,14,12)
            question() addition_fraction(1,19,17,20)
            question() addition_fraction(3,2,14,11)
            question() addition_fraction(18,19,7,18)
            question() addition_fraction(17,3,12,12)
            question() addition_fraction(9,19,19,14)
        \end{luacode}
        \end{multicols}
    
    \exercicetitre{Trouver une fraction égale à une autre}\vspace{-1.5em}
        \begin{multicols}{3}\small
        \begin{luacode}
            question() fraction_egale(3,5,9)
            question() fraction_egale(9,17,63)
            question() fraction_egale(5,13,45)
            question() fraction_egale(17,6,136)
            question() fraction_egale(7,18,28)
            question() fraction_egale(16,8,64)
            question() fraction_egale(9,20,72)
            question() fraction_egale(20,11,80)
            question() fraction_egale(10,12,90)
            question() fraction_egale(2,20,12)
            question() fraction_egale(6,2,48)
            question() fraction_egale(12,11,72)
            question() fraction_egale(6,15,18)
            question() fraction_egale(6,12,30)
            question() fraction_egale(3,18,12)
            question() fraction_egale(10,14,70)
            question() fraction_egale(18,3,126)
            question() fraction_egale(16,2,48)
            question() fraction_egale(2,12,16)
            question() fraction_egale(20,13,160)
            question() fraction_egale(12,19,108)
        \end{luacode}
        \end{multicols}

    \exercicetitre{Multiplications de fractions}\vspace{-1.5em}
        \begin{multicols}{3}\small
        \begin{luacode}
            question() multiplication_fractions(4, 5, 2, 8)
            question() multiplication_fractions(12, 5, 3, 11)
            question() multiplication_fractions(9, 8, 7, 9)
            question() multiplication_fractions(8, 15, 1, 3)
            question() multiplication_fractions(3, 6, 4, 11)
            question() multiplication_fractions(13, 12, 1, 11)
            question() multiplication_fractions(6, 12, 1, 2)
            question() multiplication_fractions(12, 5, 6, 4)
            question() multiplication_fractions(15, 12, 2, 10)
            question() multiplication_fractions(14, 10, 15, 3)
            question() multiplication_fractions(1, 5, 1, 1)
            question() multiplication_fractions(15, 7, 4, 15)
            question() multiplication_fractions(12, 11, 11, 5)
            question() multiplication_fractions(11, 15, 15, 1)
            question() multiplication_fractions(8, 6, 2, 4)
        \end{luacode}
        \end{multicols}

    \clearpage
    \exercicetitre{Divisions de fractions}\vspace{-1.5em}
        \begin{multicols}{3}\small
        \begin{luacode}
            question() division_fractions(3, 9, 2, 9)
            question() division_fractions(12, 5, 1, 1)
            question() division_fractions(2, 1, 10, 3)
            question() division_fractions(15, 10, 12, 15)
            question() division_fractions(5, 5, 10, 2)
            question() division_fractions(5, 2, 1, 3)
            question() division_fractions(1, 2, 1, 14)
            question() division_fractions(4, 10, 5, 6)
            question() division_fractions(2, 8, 12, 7)
            question() division_fractions(8, 6, 12, 10)
            question() division_fractions(1, 10, 7, 10)
            question() division_fractions(15, 6, 11, 11)
            question() division_fractions(6, 12, 9, 1)
            question() division_fractions(6, 15, 10, 10)
        \end{luacode}
        \end{multicols}
        
\end{questions}

\clearpage
\CORRECTIONS

\begin{questions}

    \exercicetitre{Additionner des fractions}\vspace{-1.5em}
        \begin{multicols}{2}\small
        \begin{luacode}
            question() addition_fraction_corrige(20,4,2,4)
            question() addition_fraction_corrige(19,12,10,8)
            question() addition_fraction_corrige(17,3,5,5)
            question() addition_fraction_corrige(20,5,6,14)
            question() addition_fraction_corrige(9,16,6,16)
            question() addition_fraction_corrige(20,18,17,14)
            question() addition_fraction_corrige(15,7,7,8)
            question() addition_fraction_corrige(5,4,3,5)
            question() addition_fraction_corrige(7,4,9,6)
            question() addition_fraction_corrige(16,19,14,12)
            question() addition_fraction_corrige(1,19,17,20)
            question() addition_fraction_corrige(3,2,14,11)
            question() addition_fraction_corrige(18,19,7,18)
            question() addition_fraction_corrige(17,3,12,12)
            question() addition_fraction_corrige(9,19,19,14)
        \end{luacode}
        \end{multicols}

    \exercicetitre{Trouver une fraction égale à une autre}\vspace{-1.5em}
        \begin{multicols}{3}\small
        \begin{luacode}
            question() fraction_egale_corrige(3,5,9)
            question() fraction_egale_corrige(9,17,63)
            question() fraction_egale_corrige(5,13,45)
            question() fraction_egale_corrige(17,6,136)
            question() fraction_egale_corrige(7,18,28)
            question() fraction_egale_corrige(16,8,64)
            question() fraction_egale_corrige(9,20,72)
            question() fraction_egale_corrige(20,11,80)
            question() fraction_egale_corrige(10,12,90)
            question() fraction_egale_corrige(2,20,12)
            question() fraction_egale_corrige(6,2,48)
            question() fraction_egale_corrige(12,11,72)
            question() fraction_egale_corrige(6,15,18)
            question() fraction_egale_corrige(6,12,30)
            question() fraction_egale_corrige(3,18,12)
            question() fraction_egale_corrige(10,14,70)
            question() fraction_egale_corrige(18,3,126)
            question() fraction_egale_corrige(16,2,48)
            question() fraction_egale_corrige(2,12,16)
            question() fraction_egale_corrige(20,13,160)
            question() fraction_egale_corrige(12,19,108)
        \end{luacode}
        \end{multicols}

    \clearpage
    \exercicetitre{Multiplication de fractions}\vspace{-1.5em}
        \begin{multicols}{2}\small
        \begin{luacode}
            question() multiplication_fractions_corrige(4, 5, 2, 8)
            question() multiplication_fractions_corrige(12, 5, 3, 11)
            question() multiplication_fractions_corrige(9, 8, 7, 9)
            question() multiplication_fractions_corrige(8, 15, 1, 3)
            question() multiplication_fractions_corrige(3, 6, 4, 11)
            question() multiplication_fractions_corrige(13, 12, 1, 11)
            question() multiplication_fractions_corrige(6, 12, 1, 2)
            question() multiplication_fractions_corrige(12, 5, 6, 4)
            question() multiplication_fractions_corrige(15, 12, 2, 10)
            question() multiplication_fractions_corrige(14, 10, 15, 3)
            question() multiplication_fractions_corrige(1, 5, 1, 1)
            question() multiplication_fractions_corrige(15, 7, 4, 15)
            question() multiplication_fractions_corrige(12, 11, 11, 5)
            question() multiplication_fractions_corrige(11, 15, 15, 1)
            question() multiplication_fractions_corrige(8, 6, 2, 4)
        \end{luacode}
        \end{multicols}

    \exercicetitre{Divisions de fractions}\vspace{-1.5em}
        \begin{multicols}{2}\small
        \begin{luacode}
            questionX() division_fractions_corrige(3, 9, 2, 9)
            questionX() division_fractions_corrige(12, 5, 1, 1)
            questionX() division_fractions_corrige(2, 1, 10, 3)
            questionX() division_fractions_corrige(15, 10, 12, 15)
            questionX() division_fractions_corrige(5, 5, 10, 2)
            questionX() division_fractions_corrige(5, 2, 1, 3)
            questionX() division_fractions_corrige(1, 2, 1, 14)
            questionX() division_fractions_corrige(4, 10, 5, 6)
            questionX() division_fractions_corrige(2, 8, 12, 7)
            questionX() division_fractions_corrige(8, 6, 12, 10)
            questionX() division_fractions_corrige(1, 10, 7, 10)
            questionX() division_fractions_corrige(15, 6, 11, 11)
            questionX() division_fractions_corrige(6, 12, 9, 1)
            questionX() division_fractions_corrige(6, 15, 10, 10)
        \end{luacode}
        \end{multicols}

\end{questions}


\end{document}